# Routing Behavior Configuration
# Controls how the router makes decisions and manages context

behavior:
  # Always load core-contract first
  always_load_core: true

  # Maximum number of context modules to load
  max_context_modules: 5

  # When to delegate vs handle directly
  delegation_threshold:
    tokens: 2000
    confidence: 0.7

  # Whether to report routing decisions to user
  report_routing: true

  # Whether to include alternative intents in reports
  report_alternatives: true

  # Auto self-learning triggers
  # When confidence falls below threshold after execution, invoke self-learning
  auto_self_learning:
    enabled: true
    low_confidence_threshold: 0.4
    # Trigger when final confidence < 0.4
    intents_with_learning:
      - devops
      - research
      - explore
    intents_without_learning:
      - debug
      - implement
      - git
    note: "User approval required before applying any learned changes"

  # Context coupling rules
  # When certain modules load, others MUST also load
  module_coupling:
    # When coding-standards loads, commenting-rules MUST also load
    10-coding-standards:
      must_co_load:
        - 12-commenting-rules
      reason: "Commenting rules are inseparable from coding standards"
    # When artifacts-policy loads, it provides consent workflow for all skills
    11-artifacts-policy:
      applies_to:
        - code-agent
        - workflow-management
        - task-tracking
        - verifier-code-agent
        - self-learning
      reason: "Artifact consent applies to all skills that create files"
